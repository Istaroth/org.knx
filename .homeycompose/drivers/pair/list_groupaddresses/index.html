<!doctype html>
<ul id="groupaddress-list"></ul>
<script type="text/html" id="ga-list-template">
    <li class="ga">
        <label for='ga-{{:address}}' class="name">
            <div class="overlay"></div>
            <input class="name" value="{{:name}}" tabindex="-1" />
        </label>
        <label for='ga-{{:address}}' class="radio">
            <input id='ga-{{:address}}' data-address='{{:address}}' type="radio" name="ga" value="{{:address}}" tabindex="{{:#index+1}}" />
        </label>
    </li>
</script>
<script>
    Homey.setTitle(Homey.__("settings.groupaddresses"));
    function renderKNXInterfaceList(interfaceList) {
        var ga_render = $('#ga-list-template').render(interfaceList, {
            stringify: JSON.stringify
        });
        var $gaList = $('#groupaddress-list');
        $gaList.html(ga_render);
        $gaList.find(":radio").change(function(){
            //Homey.emit('selected_interface', $(this).data('ga'));
        });
        if ($gaList.children().length) {
            $($($gaList.children()[0]).find(":radio")[0]).click();
        }
    }
    Homey.emit('list_etsimport', null, function(error, interfaceList) {
        renderKNXInterfaceList(interfaceList);
    });

    var $ipInput = $("#ip_address");
    var $searchButton = $("#search_button");
    $searchButton.on("click", function() {
        Homey.emit("manual_ip_address", $ipInput.val(), function(error, interfaceList){
            renderKNXInterfaceList(interfaceList);
        });
    });
</script>